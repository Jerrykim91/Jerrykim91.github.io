---
title: 2.Data visualization
author: Jerry
date: 2022-04-06 
category: Data Analytics #Data Analytics
layout: post
---

<h5><p align="right"> {{ page.date | date_to_string }} </p></h5>
<!-- ì½”ë“œ ìƒë‹¨ :  -->
<a href="https://hits.seeyoufarm.com">
<img align="right" src="https://hits.seeyoufarm.com/api/count/incr/badge.svg?url=https://github.com/Jerrykim91/jerrykim91.github.io"/></a> 


<br>

#### 2. Data Analytics - Data visualization

<br><br>

# Data visualization - Pandas 

ì£¼ë¡œ ì“°ëŠ” ëª¨ë“ˆ  `matplotlib`,`plotly`,

<br>

## 1. matplotlib


<br>

### 1) ì„¤ì • 

---

1) ì„í¬íŠ¸ 

```py 
import matplotlib.pyplot as plt # matplotlib
%matplotlib inline              # ê°™ì´ ì„ ì–¸ í•´ì¤˜ì•¼í•¨ 
```

<br>

2) í°íŠ¸ ì„±ì •     
ëª¨ë“ˆì„ ë¶€ë¥´ë©´ì„œ ê·¸ ë‹¤ìŒì— í•´ì•¼í• ì¼ì€ í°íŠ¸ë¥¼ ì„¤ì •í•´ ì¤˜ì•¼í•œë‹¤.    
    ê·¸ë˜í”„ë¥¼ ê·¸ë¦¬ë‹¤ ë³´ë©´ í•œê¸€ì´ ë§ì´ ê¹¨ì§€ëŠ”ê²ƒì„ í™•ì¸ í•  ìˆ˜ ìˆë‹¤.    
    ê·¸ë ‡ê¸° ë•Œë¬¸ì— ë¯¸ì—°ì— ë°©ì§€í•˜ê³ ì ë¯¸ë¦¬ ì½”ë“œë¥¼ ì„ ì–¸í•˜ê³  ë“¤ì–´ê°€ë„ë¡ í•˜ê² ë‹¤. 

```py
# í°íŠ¸
import platform

if platform.system() == 'Darwin':    # ë§¥
    font_name = 'AppleGothic'
elif platform.system() == 'Linux':   # ë¦¬ëˆ…ìŠ¤
    font_name = 'NanumGothic'
elif platform.system() == 'Windows': # ìœˆë„ìš°
    font_name = 'Malgun Gothic'
else:
    print('ìš´ì˜ì²´ì œ ì ìš©ë¶ˆê°€ ìš´ì˜ì²´ì œ í™•ì¸ ìš”ë§')

plt.rc('font', family=font_name)
```

ë§Œì•½ ì•ˆë˜ë©´ ë³¸ì¸ ì»´í“¨í„°ì— í•´ë‹¹ í°íŠ¸ê°€ ìˆëŠ”ì§€ í™•ì¸ í›„ í°íŠ¸ë¥¼ ì„¤ì¹˜ í•˜ëŠ” ë°©ë²•ì„ ê³ ë ¤ í•´ë³´ê¸°ë¥¼ ë°”ëŒ

<br>

3) ë²”ë¡€ - `plt.legend()`
    - `plt.plot`í•¨ìˆ˜ì˜ ì¸ìì— ë ˆì´ë¸”ì„ ê¼­ í‘œê¸°í•  ê²ƒ 
    - ì™¸ë¶€ : `plt.legend(loc=(1.1, 0.5),ncol=5) `

<br>

4) ìƒ‰ê¹”  
    -  ì¶”ê°€í•˜ë©´ ë¨

```py
colors = ['r', 'y', 'dodgerblue', 'C2','#3C538D']

import random

c = ["#"+''.join([random.choice('0123456789ABCDEF') for j in range(6)])]
print(c)

```

<br>

---



<br>



### 2) ë¼ì¸

<br>

```py
data.plot.line()
plt.tight_layout()
plt.legend(loc=(1.1, 0.5),ncol=5)
plt.show()
```
<br>



### 3) Scatter plot

<br>

```py
x = data['col_x']
y = data['col_y']
plt.scatter(x, y)
plt.show()
```
<br>


### 4) 

<br>

```py
sns.pairplot(ndf, kind='reg')
plt.show()
```
<br>




### 5)  subplot 

<br>

### ë°©ë²• 1.1

```py
# define subplot grid
fig, axs = plt.subplots(nrows=3, ncols=2, figsize=(15, 12))
plt.subplots_adjust(hspace=0.5)
fig.suptitle("Daily closing prices", fontsize=18, y=0.95)

# loop through tickers and axes
for ticker, ax in zip(tickers, axs.ravel()):
    # filter df for ticker and plot on specified axes
    df[df["ticker"] == ticker].plot(ax=ax)

    # chart formatting
    ax.set_title(ticker.upper())
    ax.get_legend().remove()
    ax.set_xlabel("")

plt.show()
```



<br>

### ë°©ë²• 1.2

```py
plt.figure(figsize=(15, 12))
plt.subplots_adjust(hspace=0.5)
plt.suptitle("Daily closing prices", fontsize=18, y=0.95)

# loop through the length of tickers and keep track of index
for n, ticker in enumerate(tickers):
    # add a new subplot iteratively
    ax = plt.subplot(3, 2, n + 1)

    # filter df and plot ticker on the new subplot axis
    df[df["ticker"] == ticker].plot(ax=ax)

    # chart formatting
    ax.set_title(ticker.upper())
    ax.get_legend().remove()
    ax.set_xlabel("")
```


### ë°©ë²• 2

```py
plt.figure(figsize=(15, 12))
plt.subplots_adjust(hspace=0.2)
plt.suptitle("Daily closing prices", fontsize=18, y=0.95)

# set number of columns (use 3 to demonstrate the change)
ncols = 3
# calculate number of rows
nrows = len(tickers) // ncols + (len(tickers) % ncols > 0)

# loop through the length of tickers and keep track of index
for n, ticker in enumerate(tickers):
    # add a new subplot iteratively using nrows and cols
    ax = plt.subplot(nrows, ncols, n + 1)

    # filter df and plot ticker on the new subplot axis
    df[df["ticker"] == ticker].plot(ax=ax)

    # chart formatting
    ax.set_title(ticker.upper())
    ax.get_legend().remove()
    ax.set_xlabel("")
```


<br>




### 6) íŒŒì´ì°¨íŠ¸ - Pie plot

<br>

```py
import matplotlib.pyplot as plt   # ë§·í´ë ›- ê·¸ë˜í”„
%matplotlib inline


# ignore warnings
import warnings    # ì›Œë‹ ë°©ì§€
warnings.filterwarnings('ignore')

# ë¼ë²¨
labels = ('A', 'B', 'C') #-> plt.legend(['A','B','C'])
data = [50, 30, 40] 

plt.figure(figsize=(6, 6))

# plt.pieë¡œ ìƒê¸°ëŠ” ìš”ì†Œë¥¼ ë‹¤ìŒì²˜ëŸ¼ ë¦¬í„´í•˜ì—¬ ê°’ì„ ì €ì¥í•´ë‘ê³  
patches, texts, autotexts = plt.pie(
    labels=labels,          # ê° ì´ë¦„
    labeldistance=1.1,      # ë²Œì–´ì§
    x = data,               # ê°’
    explode=(0.1, 0.1, 0),  # pieê°€ íŠ€ì–´ë‚˜ì˜¤ëŠ”ì§€ ì •í•´ì¤Œ  
    startangle=90,          # ê°ë„
    shadow=False,           #ê·¸ë¦¼ì 
    counterclock=False,     # ì‹œê³„ë°©í–¥ìœ¼ë¡œ ê°€ëŠ”ì§€, ì‹œê³„ ë°˜ëŒ€ ë°©í–¥ìœ¼ë¡œ ê°€ëŠ”ì§€ ì •í•´ì¤Œ 
    autopct='%1.1f%%',      # pi ìœ„ì— í‘œì‹œë  ê¸€ì í˜•íƒœ, ë˜í•œ ì•Œì•„ì„œ %ë¡œ ë³€í™˜í•´ì„œ ì•Œë ¤ì¤Œ 
    pctdistance=0.7,        # pctê°€ radius ê¸°ì¤€ìœ¼ë¡œ ì–´ë””ì¯¤ì— ìœ„ì¹˜í• ì§€ ì •í•¨ 
    colors=['grey', 'red', 'blue'],
)


## ë„ë„›ì²˜ëŸ¼ ë§Œë“¤ê¸°
centre_circle = plt.Circle((0,0),0.50,color='white')
plt.gca().add_artist(centre_circle)

# ## label ìƒ‰ ë³€ê²½ 
# for t in texts:
#     t.set_color("green")
#     t.set_fontproperties(BMDOHYEON)
#     t.set_fontsize(50)

# ## pie ìœ„ì˜ í…ìŠ¤íŠ¸ë¥¼ ë‹¤ë¥¸ ìƒ‰ìœ¼ë¡œ ë³€ê²½í•´ì£¼ê¸° 
# for t in autotexts:
#     t.set_color("white")
#     t.set_fontproperties(BMDOHYEON)
#     t.set_fontsize(20)

plt.tight_layout()
save_path = "../data"
plt.savefig(save_path)
plt.show()
```

##### ì°¸ê³  <br>

[Matplotlib Tutorial - íŒŒì´ì¬ìœ¼ë¡œ ë°ì´í„° ì‹œê°í™”í•˜ê¸°][1]




<br><br>



## 2. 

<br>

```py

```

<br>



<br><br>


### 10) ê·¸ë˜í”„ ì´ë¯¸ì§€ ì €ì¥ 


<br>

```py
# í”„ë¦°íŠ¸ 
fig = plt.figure(figsize=(20,12))
fig.savefig('í´ë¼ìš°ë“œ.png')

```

<br><br>


## 2. íˆíŠ¸ë§µ

<br>



```py
fig = plt.figure(figsize=(12,12))

data_corr = data.corr() # ì»¬ëŸ¼ì„ ì¶”ë¦° ë°ì´í„°
sns.heatmap(data_corr, annot=True, cmap='Greens', annot_kws={'size':8})
plt.show()

```

<br>


<br><br>


## 3. plotly


```py
# ì„¤ì¹˜ 
# pip install plotly
import plotly
```

<br>


<br><br>



## 5. ê³µê°„ë¶„ì„ - ì‹œê°í™” 


### 1) ê³µê°„ ë¶„ì„ 

<br>

```py
import plotly.express as px

fig = px.scatter_mapbox(df_caffee, lat="ìœ„ë„", lon="ê²½ë„", hover_name="ìƒí˜¸ëª…", hover_data=["ì§€ë²ˆì£¼ì†Œ", "ë„ë¡œëª…ì£¼ì†Œ"],
                        color_discrete_sequence=["#636EFA"], zoom=11, height=600)
fig.update_layout(mapbox_style="open-street-map")
fig.update_layout(margin={"r":0,"t":0,"l":0,"b":0})
fig.show()
```

<br>

### 2) ê³µê°„ ì •ë³´ ì˜¤í”ˆ í”Œë«í¼ 

<br>

ê³µê°„ì •ë³´ ì˜¤í”ˆ í”„ë«í¼ì„ ì‚¬ìš©í•˜ê¸°ìœ„í•´ì„œëŠ” í•„ìš”í•¨ -> [open api ë°œê¸‰][5]

```py
# VworldSatellite, VworldHybrid íƒ€ì¼ ì¶”ê°€

fig = px.scatter_mapbox(df_caffee, lat="ìœ„ë„", lon="ê²½ë„", hover_name="ìƒí˜¸ëª…", hover_data=["ì§€ë²ˆì£¼ì†Œ", "ë„ë¡œëª…ì£¼ì†Œ"],
                        color_discrete_sequence=["#FFA15A"], zoom=11, height=600)
fig.update_layout(mapbox_style="open-street-map")
fig.update_layout(margin={"r":0,"t":0,"l":0,"b":0})

# ê°œì¸ api ì½”ë“œ ìˆìŒ 
fig.update_layout(
    mapbox_style="white-bg",
    mapbox_layers=[
        {
            "below": 'traces', 
            "sourcetype": "raster",
            "source": [
                "http://api.vworld.kr/req/wmts/1.0.0/ê°œì¸í‚¤ì…ë ¥/Satellite/{z}/{y}/{x}.jpeg"
            ]
        },
        {
            "sourcetype": "raster",
            "source": [
                "http://api.vworld.kr/req/wmts/1.0.0/ê°œì¸í‚¤ì…ë ¥/Hybrid/{z}/{y}/{x}.png"
            ],
        }
      ])
# fig.update_layout(margin={"r":0,"t":0,"l":0,"b":0})
fig.show()
```

<br>


### 3) ë§µë°•ìŠ¤ ë°€ë„ ì—´ì§€ë„

<br>

```py
# ë§µë°•ìŠ¤ ë°€ë„ ì—´ì§€ë„
import plotly.graph_objects as go

fig = go.Figure(go.Densitymapbox(lat=df_caffee['ìœ„ë„'], lon=df_caffee['ê²½ë„'], radius=10))
fig.update_layout(
    mapbox_style="white-bg",
    mapbox_layers=[
        {
            "below": 'traces',
            "sourcetype": "raster",
            "source": [
                "http://api.vworld.kr/req/wmts/1.0.0/ê°œì¸í‚¤ì…ë ¥/Satellite/{z}/{y}/{x}.jpeg"
            ]
        },
        {
            "sourcetype": "raster",
            "source": [
                "http://api.vworld.kr/req/wmts/1.0.0/ê°œì¸í‚¤ì…ë ¥/Hybrid/{z}/{y}/{x}.png"
            ],
        }
      ],
    mapbox_zoom=9,
    mapbox_center = {"lat": 35.14, "lon": 129.07}) 
fig.update_layout(margin={"r":0,"t":0,"l":0,"b":0})
fig.show()
```

<br><br>

## 6. ì›¹ìœ¼ë¡œ ê·¸ë˜í”„ ë³´ì´ê¸° 

<br>

[Plotly.Expressë¥¼ ì‚¬ìš©í•œ ì‹œê°í™” : í¬ê´„ì  ì¸ ê°€ì´ë“œ][2]

ìš”ì¦˜ì— ê°€ì¥ ëœ¨ê³  ìˆëŠ” ì‹œê°í™” íŒ¨í‚¤ì§€ì´ë‹¤. 


<br>

### 1. plotly

```py

import plotly.graph_objects as go # or plotly.express as px
fig = go.Figure() # or any Plotly Express function e.g. px.bar(...)
# fig.add_trace( ... )
# fig.update_layout( ... )

import dash
import dash_core_components as dcc
import dash_html_components as html

app = dash.Dash()
app.layout = html.Div([
    dcc.Graph(figure=fig)
])

app.run_server(debug=True, use_reloader=False)  # Turn off reloader if inside Jupyter
```


##### ì°¸ê³  

[Plotly ì°¸ê³ ìë£Œ_ì§€êµ¬ê³¼í•™, GIS, ê·¸ë¦¬ê³  ì›ê²©íƒì‚¬ ë¸”ë¡œê·¸][3]     
[Plotly ì°¸ê³ ìë£Œ_í•˜ë‚˜ì”© ì ì„ ì°ì–´ ë‚˜ê°€ë©°][4]


<br><br>

### 2. plt 

```py
```

<br>

---

<br>


### Reference <br>

[1]:https://wikidocs.net/book/5011
[2]:https://ichi.pro/ko/plotly-expressleul-sayonghan-sigaghwa-pogwaljeog-in-gaideu-258792796523351
[3]:http://blog.daum.net/geoscience/1420
[4]:https://dailyheumsi.tistory.com/118
[5]:http://www.vworld.kr/dev/v4api.do

- [ê°€ì´ë“œ1](https://www.cognitumlab.com/single-post/2017/10/08/The-Art-of-Data-2%ED%9A%8C-%EC%9D%B4%EB%9F%B4-%EB%95%90-%EC%9D%B4%EB%9F%B0-%EA%B7%B8%EB%9E%98%ED%94%84-%EB%8D%B0%EC%9D%B4%ED%84%B0%EC%97%90-%EB%A7%9E%EB%8A%94-%EC%8B%9C%EA%B0%81%ED%99%94-%EB%B0%A9%EB%B2%95)
- [ê°€ì´ë“œ2](https://codetorial.net/matplotlib/set_color.html)


<!-- ì½”ë§¨íŠ¸ ìŠ¤í¬ë¦½íŠ¸ -->
<br>
<script src="https://utteranc.es/client.js"
    repo="Jerrykim91/jerrykim91.github.io"
    issue-term="title"
    label="ğŸ˜"
    theme="github-light"
    crossorigin="anonymous"
    async>
</script>
<br>